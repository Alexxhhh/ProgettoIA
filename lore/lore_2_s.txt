# Treasure Quest – Lore con sistema vite booleano

## 1. Premessa
Sei un avventuriero all’interno di un antico tempio labirintico. Parti dalla stanza 1 (entrance) e devi raggiungere la stanza 17 (treasure_room) senza esaurire le vite.

## 2. Sistema vite (STRIPS)
Predicati iniziali:
  (life1) (life2) (life3)

Azioni fatali consumano le vite nell’ordine:
  lose_life3  – pre: (life3)                          → eff: ¬life3
  lose_life2  – pre: ¬life3 ∧ (life2)                 → eff: ¬life2
  lose_life1  – pre: ¬life3 ∧ ¬life2 ∧ (life1)        → eff: ¬life1 ∧ dead

Goal globale: (and (at treasure_room) (not dead))

## 3. Oggetti di inventario
Torcia       	– per i pipistrelli (bat_room, id 2)
Panno_bagnato 	– per il gas (gas_room, id 5)
Scudo      	– per le frecce (arrow_room, id 10)
Asta_di_ferro   – per la leva (flood_room, id 15)

## 4. Chiavi
k1 in LK111 (room 11)  → sblocca connessioni tra room 4 and room 5 , room 5 and room 4 ,room 5 and room 15, room 15 and room 5  (5)
k2 in LK214 (room 14)  → sblocca connessoni tra room 9 and room 15 , room 15 and room 9
k3 in LK38 (room 8)   → sblocca connessioni tra room 7 and room 15 , room 15 and room  7
k4 in LK43 (room 3)   → sblocca connessioni tra room 10 and 9 , room 9 and room 10

## 5. Puzzle
p2 - 2TO_Torcia (room 2)
   Question: La stanza è piena di pipistrelli, che oggetto intendi usare per attraversarla?
   Object: Torcia
p4 – 4TE_Tempo (room 4)
   Question: Mi trovi nel presente, ma non posso essere toccato. Passo silenzioso, nessuno mi vede arrivare. Posso guarire o distruggere. Chi sono?
   Answer: Tempo
p5 - 5TO_Panno_bagnato (room 5)
   Question: Hai azionato una trappola e la stanza si sta riempiendo di gas! Che oggetto vuoi usare?
   Object: Panno_bagnato
p7 – 7TE_Stagioni (room 7)
   Question: Fratelli corrono insieme, nessuno lascia mai il proprio cammino. A volte sono calmi, a volte in guerra, ma sempre si inseguono all'infinito.
   Answer: Stagioni
p10 - 10TO_Scudo (room 10)
   Question: La stanza è piena di buchi sulle pareti. Che oggetto vuoi usare per proseguire?
   Object: Scudo
p12 – 12TE_Statua (room 12)
   Question : Ho occhi ma non posso vedere, una bocca ma non posso parlare, una forma umana ma non lo sono. Chi sono?
   Answer: Statua
p13 – 13TE_Oscurita (room 13)
   Question : Più passa il tempo, più divento grande. Vivo dove la luce non osa entrare. Un giorno conquistero' anche l'universo. Cosa sono?
   Answer: Oscurita'
p15 - 15TO_Asta_di_ferro (room 15)
   Question: Le porte si sono chiuse e la stanza si sta riempiendo d'acqua! Vedi una leva quasi sommersa, che oggetto vuoi usare?
   Object: Asta_di_ferro
p16 16_treasure_antechamber (room 16), single try
   Question: chi è che al mattino cammina con 4 zampe a mezzogiorno con 2 e la sera con 3?
   Answer: Uomo

6. Mappa stanze (id – nome – tipo)

1 entrance start
2 TO_Torcia2 trap-puzzle p2
3 LK43 key4
4 TE_Tempo4 trap-puzzle p4
5 TO_Gas5 trap-puzzle p5
6 LV6 safe
7 TE_Stagioni7 trap-puzzle p7
8 LK38 key3
9 LV9 safe
10 TO_Scudo10 trap-puzzle p10
11 LK111 key1
12 TE_Statua12 trap-puzzle p12
13 TE_Oscurita13 trap-puzzle p13
14 LK214 key2
15 TO_Asta_di_ferro15 trap-puzzle p15
16 treasure_antechamber16 trap-puzzle p16
17 treasure_room goal

7. Connessioni (partenza, arrivo, token direzione n/s/e/w, chiave richiesta (opzionale))

connected entrance TO_Torcia2 n no
connected entrance TE_Oscurita13 e no
connected entrance TE_Statua12 s no
connected TO_Torcia2 LK43 e no
connected TO_Torcia2 entrance s no
connected LK43 TE_Tempo4 e no
connected LK43 TO_Torcia2 w no
connected TE_Tempo4 TO_Gas5 e k1
connected TE_Tempo4 LK214 s no
connected TE_Tempo4 LK43 w no
connected TO_Gas5 LV6 e no
connected TO_Gas5 TO_Asta_di_ferro15 s k1
connected TO_Gas5 TE_Tempo4 w k1
connected LV6 TE_Stagioni7 s no
connected LV6 TO_Gas5 w no
connected TE_Stagioni7 LV6 n no
connected TE_Stagioni7 LK38 s no
connected TE_Stagioni7 TO_Asta_di_ferro15 w k3
connected LK38 TE_Stagioni7 n no
connected LK38 LV9 w no
connected LV9 TO_Asta_di_ferro15 n k2
connected LV9 LK38 e no
connected LV9 TO_Scudo10 w k4
connected TO_Scudo10 LK214 n no
connected TO_Scudo10 LV9 e k4
connected TO_Scudo10 LK111 w no
connected LK111 TO_Scudo10 e no
connected LK111 TE_Oscurita13 w no
connected TE_Statua12 entrance n no
connected TE_Statua12 LK214 e no
connected TE_Oscurita13 LK214 e no
connected TE_Oscurita13 LK111 s no
connected TE_Oscurita13 entrance w no
connected LK214 TE_Tempo4 n no
connected LK214 TO_Scudo10 e no
connected LK214 TE_Statua12 s no
connected LK214 TE_Oscurita13 w no
connected TO_Asta_di_ferro15 TO_Gas5 n k1
connected TO_Asta_di_ferro15 TE_Stagioni7 e k3
connected TO_Asta_di_ferro15 LV9 s k2
connected TO_Asta_di_ferro15 treasure_antechamber16 w no
connected treasure_antechamber16 TO_Asta_di_ferro15 e no
connected treasure_antechamber16 treasure_room w no

8. Fatti iniziali minimi (estratto)

(:init
(at entrance)
(life1) (life2) (life3)

(has_item Torcia)
(has_item Panna_bagnato)
(has_item Scudo)
(has_item Asta_di_ferro)

(key_in_room k1 LK111 (room 11))
(key_in_room k2 LK214 (room 14))
(key_in_room k3 LK38 (room 8))
(key_in_room k4 LK43 (room 3))

;; connessioni sempre aperte
(connected entrance TO_Torcia2 n)
(connected entrance TE_Oscurita13 e)
(connected entrance TE_Statua12 s)
(connected TO_Torcia2 LK43 e)
(connected TO_Torcia2 entrance s)
(connected LK43 TE_Tempo4 e)
(connected LK43 TO_Torcia2 w)
(connected TE_Tempo4 LK214 s)
(connected TE_Tempo4 LK43 w)
(connected TO_Gas5 LV6 e)
(connected LV6 TE_Stagioni7 s)
(connected LV6 TO_Gas5 w)
(connected TE_Stagioni7 LV6 n)
(connected TE_Stagioni7 LK38 s)
(connected LK38 TE_Stagioni7 n)
(connected LK38 LV9 w)
(connected LV9 LK38 e)
(connected TO_Scudo10 LK214 n)
(connected TO_Scudo10 LK111 w)
(connected LK111 TO_Scudo10 e)
(connected LK111 TE_Oscurita13 w)
(connected TE_Statua12 entrance n)
(connected TE_Statua12 LK214 e)
(connected TE_Oscurita13 LK214 e)
(connected TE_Oscurita13 LK111 s)
(connected TE_Oscurita13 entrance w)
(connected LK214 TE_Tempo4 n)
(connected LK214 TO_Scudo10 e)
(connected LK214 TE_Statua12 s)
(connected LK214 TE_Oscurita13 w)
(connected TO_Asta_di_ferro15 treasure_antechamber16 w)
(connected treasure_antechamber16 TO_Asta_di_ferro15 e)
(connected treasure_antechamber16 treasure_room w)

;; connessioni bloccate
(key_required TE_Tempo4 TO_Gas5 e k1)
(key_required TO_Gas5 TO_Asta_di_ferro15 s k1)
(key_required TO_Gas5 TE_Tempo4 w k1)
(key_required TE_Stagioni7 TO_Asta_di_ferro15 w k3)
(key_required LV9 TO_Asta_di_ferro15 n k2)
(key_required LV9 TO_Scudo10 w k4)
(key_required TO_Scudo10 LV9 e k4)
(key_required TO_Asta_di_ferro15 TO_Gas5 n k1)
(key_required TO_Asta_di_ferro15 TE_Stagioni7 e k3)
(key_required TO_Asta_di_ferro15 LV9 s k2)

;; trappole
(puzzle_in_room p2 TO_Torcia2) (trap_active TO_Torcia2) (answer_known p2)
(puzzle_in_room p5 TO_Panno_bagnato5) (trap_active TO_Panno_bagnato5) (answer_known p5)
(puzzle_in_room p10 TO_Scudo10) (trap_active TO_Scudo10) (answer_known p10)
(puzzle_in_room p5 TO_Asta_di_ferro15) (trap_active TO_Asta_di_ferro15) (answer_known p15)

(puzzle_in_room p4 TE_Tempo4) (trap_active TE_Tempo4) (answer_known p4)
(puzzle_in_room p7 TE_Stagioni7) (trap_active TE_Stagioni7) (answer_known p7)
(puzzle_in_room p12 TE_Statua12) (trap_active TE_Statua12) (answer_known p12)
(puzzle_in_room p13 TE_Oscurita13) (trap_active TE_Oscurita13) (answer_known p13)
(puzzle_in_room p16 treasure_antechamber16) (trap_active treasure_antechamber16) (answer_known p16)
)

Goal:
(:goal (and (at treasure_room) (not dead)))