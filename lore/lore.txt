# Treasure Quest – Lore con sistema vite booleano

## 1. Premessa
Sei un avventuriero all’interno di un antico tempio labirintico. Parti dalla stanza 1 (entrance) e devi raggiungere la stanza 17 (treasure_room) senza esaurire le vite.

## 2. Sistema vite (STRIPS)
Predicati iniziali:
  (life1) (life2) (life3)

Azioni fatali consumano le vite nell’ordine:
  lose_life3  – pre: (life3)                          → eff: ¬life3
  lose_life2  – pre: ¬life3 ∧ (life2)                 → eff: ¬life2
  lose_life1  – pre: ¬life3 ∧ ¬life2 ∧ (life1)        → eff: ¬life1 ∧ dead

Goal globale: (and (at treasure_room) (not dead))

## 3. Oggetti di inventario
torcia       – per i pipistrelli (bat_room, id 2)
panno bagnato  – per il gas (gas_room, id 5)
scudo      – per le frecce (arrow_room, id 10)
asta di ferro   – per la leva (flood_room, id 15)

## 4. Chiavi
k1 in key_room_1 (11)  → sblocca connessioni tra room 4 and room 5 , room 5 and room 4 ,room 5 and room 15, room 15 and room 5  (5)
k2 in key_room_2 (14)  → sblocca connessoni tra room 9 and room 15 , room 15 and room 9
k3 in key_room_3 (8)   → sblocca connessioni tra room 7 and room 15 , room 15 and room  7
k4 in key_room_4 (3)   → sblocca connessioni tra room 10 and 9 , room 9 and room 10

## 5. Puzzle
p5 – puzzle_room_5 (4)
   Question:"Mi trovi nel presente, ma non posso essere toccato.Passo silenzioso, nessuno mi vede arrivare. Posso guarire o distruggere. Chi sono? "  
   Answer : Tempo
p6 – puzzle_room_6 (7)
   Question: "Fratelli corrono insieme,Nessuno lascia mai il proprio cammino.A volte sono calmi, a volte in guerra,Ma sempre si inseguono all'infinito.
   Answer: Stagioni
p7 – puzzle_room_7 (12)
   Question : Ho occhi ma non posso vedere,Una bocca ma non posso parlare,Una forma umana ma non lo sono. Chi sono?
   Answer : Statua
p8 – puzzle_room_8 (13)
   Question :Più rimuovi, più divento grande.Vivo dove la luce non osa entrare.Cosa sono?
   Answer: Oscurità
   – puzzle_room_8 (13)
p_ante Entrata  – treasure_antechamber (16), single try
  Question: chi è che al mattino cammina con 4 zampe a mezzogiorno con 2 e la sera con 3
  Answer :l'uomo
 

## 6. Mappa stanze (id – nome – tipo)
1  entrance                 start
2  bat_room                 trap-item torch
3  key_room_4               key4
4  puzzle_room_5            trap-puzzle p5
5  gas_room                 trap-item water_cloth   
6  life_room_6              safe
7  puzzle_room_6            trap-puzzle p6
8  key_room_3               key3
9  life_room_9              safe
10 arrow_room               trap-item shield        
11 key_room_1               key1
12 puzzle_room_7            trap-puzzle p7
13 puzzle_room_8            trap-puzzle p8
14 key_room_2               key2
15 flood_room               trap-item steel_pole    
16 treasure_antechamber     trap-puzzle p_ante
17 treasure_room            goal

## 7. Connessioni (bidirezionali, token direzione n/s/e/w, key required (optional))
connected entrance bat_room n
connected bat_room entrance s
connected entrance puzzle_room_7 e
connected puzzle_room_7 entrance w
connected entrance puzzle_room_8 s
connected puzzle_room_8 entrance n
connected bat_room key_room_4 e
connected key_room_4 bat_room w
connected key_room_4 puzzle_room_5 e
connected puzzle_room_5 key_room_4 w
connected puzzle_room_5 gas_room e           k1
connected gas_room puzzle_room_5 w           k1
connected gas_room flood_room s              k1
connected flood_room gas_room n              k1
connected gas_room life_room_6 e
connected life_room_6 gas_room w
connected life_room_6 puzzle_room_6 s
connected puzzle_room_6 life_room_6 n
connected puzzle_room_6 key_room_3 s
connected key_room_3 puzzle_room_6 n
connected key_room_3 life_room_9 w
connected life_room_9 key_room_3 e
connected life_room_9 arrow_room w          k4
connected arrow_room life_room_9 e          k4
connected life_room_9 key_room_2 n
connected key_room_2 life_room_9 s
connected arrow_room key_room_1 w
connected key_room_1 arrow_room e
connected key_room_1 puzzle_room_7 s
connected puzzle_room_7 key_room_1 n
connected puzzle_room_7 key_room_2 e
connected key_room_2 puzzle_room_7 w
connected puzzle_room_8 key_room_1 e
connected key_room_1 puzzle_room_8 w
connected key_room_2 puzzle_room_8 s
connected puzzle_room_8 key_room_2 n
connected flood_room puzzle_room_6 e      k3
connected puzzle_room_6 flood_room w      k3
connected flood_room life_room_9 s        k2
connected life_room_9 flood_room n        k2
connected flood_room treasure_antechamber w
connected treasure_antechamber flood_room e
connected treasure_antechamber treasure_room n
connected treasure_room treasure_antechamber s

## 8. Fatti iniziali minimi (estratto)
(:init
    ;; posizione iniziale
    (at entrance)

    ;; vite booleane
    (life1) (life2) (life3)

    ;; inventario iniziale
    (has_item torcia)       ;; torcia
    (has_item panna bagnato) ;; panno bagnato
    (has_item scudo)      ;; scudo
    (has_item asta di ferro)  ;; asta di ferro

    ;; chiavi nelle stanze
    (key_in_room k1 key_room_1 (11))
    (key_in_room k2 key_room_2 (14))
    (key_in_room k3 key_room_3 (8))
    (key_in_room k4 key_room_4 (3))

    ;; connessioni sempre aperte
    (connected entrance bat_room n)       (connected bat_room entrance s)
    (connected entrance puzzle_room_7 e)  (connected puzzle_room_7 entrance w)
    (connected entrance puzzle_room_8 s)  (connected puzzle_room_8 entrance n)
    (connected bat_room key_room_4 e)     (connected key_room_4 bat_room w)
    (connected puzzle_room_6 life_room_6 n)(connected life_room_6 puzzle_room_6 s)
    (connected key_room_3 puzzle_room_6 n) (connected puzzle_room_6 key_room_3 s)
    (connected key_room_3 life_room_9 w)   (connected life_room_9 key_room_3 e)
    (connected key_room_1 puzzle_room_7 n) (connected puzzle_room_7 key_room_1 s)
    (connected puzzle_room_7 key_room_2 e) (connected key_room_2 puzzle_room_7 w)
    (connected puzzle_room_8 key_room_1 e) (connected key_room_1 puzzle_room_8 w)
    (connected key_room_2 puzzle_room_8 s) (connected puzzle_room_8 key_room_2 n)
    (connected treasure_antechamber flood_room e)(connected flood_room treasure_antechamber w)
    (connected treasure_antechamber treasure_room n)(connected treasure_room treasure_antechamber s)

    ;; connessioni bloccate (richiedono chiave)
    (key_required puzzle_room_5 gas_room k1)
    (key_required gas_room puzzle_room_5 k1)
    (key_required gas_room flood_room k1)
    (key_required flood_room gas_room k1)

    (key_required life_room_9 arrow_room k4)
    (key_required arrow_room life_room_9 k4)

    (key_required flood_room puzzle_room_6 k3)
    (key_required puzzle_room_6 flood_room k3)

    (key_required flood_room life_room_9 k2)
    (key_required life_room_9 flood_room k2)

    ;; trappole basate su oggetti
    (trap_item_room bat_room torch)        (trap_active bat_room)
    (trap_item_room gas_room water_cloth)  (trap_active gas_room)
    (trap_item_room arrow_room shield)     (trap_active arrow_room)
    (trap_item_room flood_room steel_pole) (trap_active flood_room)

    ;; stanze con puzzle
    (puzzle_in_room p5 puzzle_room_5)       (trap_active puzzle_room_5)       (answer_known p5)
    (puzzle_in_room p6 puzzle_room_6)       (trap_active puzzle_room_6)       (answer_known p6)
    (puzzle_in_room p7 puzzle_room_7)       (trap_active puzzle_room_7)       (answer_known p7)
    (puzzle_in_room p8 puzzle_room_8)       (trap_active puzzle_room_8)       (answer_known p8)
    (puzzle_in_room p_ante treasure_antechamber) (trap_active treasure_antechamber) (answer_known p_ante)
)
Goal:
(:goal (and (at treasure_room) (not dead)))
