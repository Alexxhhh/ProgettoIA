```html
<!DOCTYPE html>
<html>
<head>
<title>Treasure Quest</title>
<style>
body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  display: grid;
  grid-template-columns: 260px 1fr;
  height: 100vh;
  margin: 0;
}
.panel {
  padding: 10px;
  border: 1px solid #555;
}
.room {
  text-align: center;
}
.room img {
  max-width: 100%;
  max-height: 300px;
}
.inventory {
  list-style: none;
  padding: 0;
}
.inventory li {
  margin-bottom: 5px;
}
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
}
.overlay-content {
  background-color: #333;
  padding: 20px;
  border: 1px solid #555;
}
.puzzle-input {
  width: 100%;
  padding: 5px;
  margin-bottom: 10px;
}
</style>
</head>
<body>
<div class="panel" id="inventory-panel">
  <h2>Inventory</h2>
  <ul id="inventory"></ul>
</div>
<div id="game-panel">
  <div id="lives">♥♥♥</div>
  <div id="room-display">
    <div id="room-image"></div>
    <div id="room-description"></div>
    <div id="room-buttons"></div>
  </div>
  <div id="game-over-overlay" class="overlay">
    <div class="overlay-content">
      <h1>Game Over</h1>
      <button onclick="location.reload()">Restart</button>
    </div>
  </div>
  <div id="victory-overlay" class="overlay">
    <div class="overlay-content">
      <h1>Victory!</h1>
      <button onclick="location.reload()">Restart</button>
    </div>
  </div>
  <div id="trap-overlay" class="overlay">
    <div class="overlay-content">
      <p id="trap-message"></p>
      <ul id="trap-choices"></ul>
    </div>
  </div>
  <div id="puzzle-overlay" class="overlay">
    <div class="overlay-content">
      <p id="puzzle-message"></p>
      <input type="text" id="puzzle-input" class="puzzle-input">
      <button id="puzzle-submit">Submit</button>
    </div>
  </div>
</div>

<script>
const rooms = {
  1: {name: "entrance", img: "https://www.pexels.com/photo/ancient-ruins-in-the-jungle-7368174/", desc: "You are at the entrance of the temple.", connections: {n: 2, e: 13, s: 12}},
  2: {name: "TO_Torcia2", img: "https://www.pexels.com/photo/dark-cave-with-bats-flying-around-7368174/", desc: "Bats are blocking your way!", connections: {s: 1, e: 3}, trap: true, item: "torcia", puzzle: "p2"},
  3: {name: "LK43", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "You found a key!", connections: {e: 4, w: 2}, key: "k4"},
  4: {name: "TE_Tempo4", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A time puzzle blocks your way!", connections: {e: 5, s: 14, w: 3}, locked: true, lockKey: "k1", puzzle: "p4"},
  5: {name: "TO_Gas5", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "Toxic gas fills the room!", connections: {e: 6, s: 15, w: 4}, locked: true, lockKey: "k1", trap: true, item: "panno_bagnato", puzzle: "p5"},
  6: {name: "LV6", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A safe room.", connections: {s: 7, w: 5}},
  7: {name: "TE_Stagioni7", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A season puzzle blocks your way!", connections: {n: 6, s: 8, w: 15}, locked: true, lockKey: "k3", puzzle: "p7"},
  8: {name: "LK38", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "You found a key!", connections: {n: 7, w: 9}, key: "k3"},
  9: {name: "LV9", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A safe room.", connections: {e: 8, w: 10, n: 15}, locked: true, lockKey: "k2"},
  10: {name: "TO_Scudo10", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "Arrows are flying!", connections: {e: 9, w: 11}, locked: true, lockKey: "k4", trap: true, item: "scudo", puzzle: "p10"},
  11: {name: "LK111", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "You found a key!", connections: {e: 10, w: 13}, key: "k1"},
  12: {name: "TE_Statua12", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A statue puzzle blocks your way!", connections: {n: 1, e: 14}, puzzle: "p12"},
  13: {name: "TE_Oscurita13", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A darkness puzzle blocks your way!", connections: {s: 11, e: 14, w: 1}, puzzle: "p13"},
  14: {name: "LK214", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "You found a key!", connections: {n: 4, e: 13, s: 12}, key: "k2"},
  15: {name: "TO_Asta_di_ferro15", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "A lever puzzle blocks your way!", connections: {n: 5, e: 7, s: 9, w: 16}, trap: true, item: "asta_di_ferro", puzzle: "p15"},
  16: {name: "treasure_antechamber16", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "The treasure antechamber!", connections: {e: 15}, puzzle: "p16"},
  17: {name: "treasure_room", img: "https://www.pexels.com/photo/ancient-stone-building-7368174/", desc: "You found the treasure!", connections: {}}
};

const inventory = ["torcia", "panno_bagnato", "scudo", "asta_di_ferro"];
let lives = 3;
let currentRoom = 1;
let keys = {};

function updateLives() {
  document.getElementById("lives").textContent = "♥".repeat(lives);
}

function updateInventory() {
  const inventoryList = document.getElementById("inventory");
  inventoryList.innerHTML = "";
  inventory.forEach(item => {
    const li = document.createElement("li");
    li.textContent = item;
    inventoryList.appendChild(li);
  });
}

function updateRoomDisplay() {
  const room = rooms[currentRoom];
  document.getElementById("room-image").innerHTML = `<img src="${room.img}" alt="${room.name}">`;
  document.getElementById("room-description").textContent = room.desc;
  const buttons = document.getElementById("room-buttons");
  buttons.innerHTML = "";
  for (const dir in room.connections) {
    const connection = room.connections[dir];
    const button = document.createElement("button");
    button.textContent = dir;
    button.onclick = () => move(currentRoom, room.connections[dir]);
    if (rooms[connection].locked && !(rooms[connection].lockKey in keys)) {
      button.disabled = true;
    }
    buttons.appendChild(button);
  }
}

function move(from, to) {
  const room = rooms[to];
  if (room.trap) {
    showTrapOverlay(to);
  } else if (room.puzzle) {
    showPuzzleOverlay(to);
  } else {
    currentRoom = to;
    updateRoomDisplay();
  }
}

function showTrapOverlay(roomId) {
  const room = rooms[roomId];
  const overlay = document.getElementById("trap-overlay");
  const message = document.getElementById("trap-message");
  const choices = document.getElementById("trap-choices");
  message.textContent = `Choose the correct item to overcome the trap in ${room.name}:`;
  choices.innerHTML = "";
  inventory.forEach(item => {
    const li = document.createElement("li");
    const button = document.createElement("button");
    button.textContent = item;
    button.onclick = () => handleTrapChoice(roomId, item);
    li.appendChild(button);
    choices.appendChild(li);
  });
  overlay.style.display = "block";
}

function handleTrapChoice(roomId, item) {
  const room = rooms[roomId];
  const overlay = document.getElementById("trap-overlay");
  if (item === room.item) {
    const index = inventory.indexOf(item);
    if (index > -1) {
      inventory.splice(index, 1);
    }
    rooms[roomId].trap = false;
    overlay.style.display = "none";
    move(currentRoom, roomId);
    updateInventory();
  } else {
    lives--;
    updateLives();
    if (lives === 0) {
      gameOver();
    }
    overlay.style.display = "none";
  }
}

function showPuzzleOverlay(roomId) {
  const room = rooms[roomId];
  const overlay = document.getElementById("puzzle-overlay");
  const message = document.getElementById("puzzle-message");
  message.textContent = `Solve the puzzle in ${room.name}:`;
  overlay.style.display = "block";
}

function handlePuzzleSubmit(roomId) {
  const room = rooms[roomId];
  const answer = document.getElementById("puzzle-input").value;
  const overlay = document.getElementById("puzzle-overlay");
  if (answer === room.puzzle) {
    rooms[roomId].puzzle = false;
    overlay.style.display = "none";
    move(currentRoom, roomId);
  } else {
    lives--;
    updateLives();
    if (lives === 0) {
      gameOver();
    }
    overlay.style.display = "none";
  }
}

function gameOver() {
  document.getElementById("game-over-overlay").style.display = "block";
}

function victory() {
  document.getElementById("victory-overlay").style.display = "block";
}

document.getElementById("puzzle-submit").onclick = () => handlePuzzleSubmit(currentRoom);

updateLives();
updateInventory();
updateRoomDisplay();
</script>

</body>
</html>
```