```html
<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Avventura nel Tempio</title>
<style>
body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
}
#game {
  display: flex;
  width: 800px;
  margin: 50px auto;
  text-align: center;
}
#inventory {
  width: 200px;
  border-right: 1px solid #555;
  padding-right: 20px;
}
#room {
  flex: 1;
  padding: 20px;
}
#room img {
  max-width: 100%;
  height: auto;
}
.buttons button {
  background-color: #444;
  color: #eee;
  border: none;
  padding: 10px 20px;
  margin: 5px;
  cursor: pointer;
}
.buttons button:disabled {
  background-color: #333;
  cursor: default;
}
#puzzle {
  display: none; /* Hidden initially */
  text-align: center;
}
#message {
  margin-top: 10px;
}
</style>
</head>
<body>
<div id="game">
  <div id="inventory">
    <h3>Inventario:</h3>
    <ul id="items"></ul>
    <h3>Chiavi:</h3>
    <ul id="keys"></ul>
  </div>
  <div id="room">
    <h2 id="room-name">Stanza 1</h2>
    <div id="lives">♥♥♥</div>
    <img id="room-image" src="https://via.placeholder.com/600x400" alt="Immagine della stanza">
    <p id="room-description"></p>
    <div class="buttons">
      <button id="north" disabled>N</button>
      <button id="south" disabled>S</button>
      <button id="east" disabled>E</button>
      <button id="west" disabled>W</button>
    </div>
    <div id="puzzle">
      <p id="puzzle-text"></p>
      <input type="text" id="puzzle-answer"><button id="submit">Invia</button>
    </div>
    <div id="message"></div>
  </div>
</div>

<script>
const rooms = {
  1: {name: "Entrate del tempio", description: "Porta di pietra di un tempio", image: "https://via.placeholder.com/600x400", connections: {n: 2, e: 13, s: 12}},
  2: {name: "Stanza buia", description: "Stanza buoia di pietra piena di pipistrelli sul tetto", image: "https://via.placeholder.com/600x400", puzzle: "Torcia"},
  3: {name: "Stanza con chiave", description: "Una chiave su una pietra illuminata", image: "https://via.placeholder.com/600x400", key: "k4", connections: {e: 4, w: 1}},
  4: {name: "Stanza della saggezza", description: "Stanza di pietra con a terra della sabbia illuminata", image: "https://via.placeholder.com/600x400", puzzle: "Tempo", connections: {e: 5, s:14, w:3}},
  5: {name: "Stanza del gas", description: "Stanza di pietra con del gas viola", image: "https://via.placeholder.com/600x400", puzzle: "Panno_bagnato", connections: {e:6, s:15, w:4}},
  6: {name: "Fontana", description: "Stanza di pietra con una fontana in funzione", image: "https://via.placeholder.com/600x400", connections: {s:7, w:5}},
  7: {name: "Stanza dei fratelli", description: "Stanza di pietra con quattro statue maschili composte", image: "https://via.placeholder.com/600x400", puzzle: "Stagioni", connections: {n:6, s:8, w:15}},
  8: {name: "Stamza con chiave", description: "Una chiave su una pietra illuminata", image: "https://via.placeholder.com/600x400", key: "k3", connections: {n:7, w:9}},
  9: {name: "Sedia", description: "Una sedia di legno in una stanza di pietra", image: "https://via.placeholder.com/600x400", connections: {e:8, w:10, n:15}},
  10: {name: "Stanza dei buchi", description: "Una stanza di pietra dritta con dei piccoli fori sulle pareti", image: "https://via.placeholder.com/600x400", puzzle: "Scudo", connections: {e:9, w:11}},
  11: {name: "Stanza con chiave", description: "Una chiave su una pietra illuminata", image: "https://via.placeholder.com/600x400", key: "k1", connections: {e:10, w:12}},
  12: {name: "Stanza misteriosa", description: "Stanza di pietra con della polvere", image: "https://via.placeholder.com/600x400", puzzle: "Statua", connections: {n:1, e:14, s:13}},
  13: {name: "Stanza opaca", description: "Una stanza di pietra molto scura e sfocata", image: "https://via.placeholder.com/600x400", puzzle: "Oscurità", connections: {n:14, w:1, s:11}},
  14: {name: "Stanza con chiave", description: "Una chiave su una pietra illuminata", image: "https://via.placeholder.com/600x400", key: "k2", connections: {n:4, e:13, s:12}},
  15: {name: "Stanza dell'acqua", description: "Una stanza di pietra allagata con una cascata di lato", image: "https://via.placeholder.com/600x400", puzzle: "Asta_di_ferro", connections: {n:9, e:7, s:5}},
  16: {name: "Anticamera del tesoro", description: "Una stanza di pietra con un muro pieno di disegni egiziani", image: "https://via.placeholder.com/600x400", puzzle: "Uomo", connections: {e:17, w:15}},
  17: {name: "Stanza del tesoro", description: "Una stanza di pietra piena d'oro", image: "https://via.placeholder.com/600x400"}
};
const inventory = ["Torcia", "Panno_bagnato", "Scudo", "Asta_di_ferro"];
let keys = [];
let lives = 3;
let currentRoom = 1;
let puzzleActive = false;


function updateUI() {
  const roomData = rooms[currentRoom];
  document.getElementById("room-name").textContent = "Stanza " + currentRoom;
  document.getElementById("room-description").textContent = roomData.description;
  document.getElementById("room-image").src = roomData.image;
  document.getElementById("lives").innerHTML = "♥".repeat(lives);
  document.getElementById("items").innerHTML = inventory.map(item => `<li>${item}</li>`).join("");
  document.getElementById("keys").innerHTML = keys.map(key => `<li>${key}</li>`).join("");

  const buttons = document.querySelectorAll(".buttons button");
  buttons.forEach(button => button.disabled = true);

  if (Object.keys(roomData.connections).length >0){
    for (const dir in roomData.connections) {
      const connection = roomData.connections[dir];
      const button = document.getElementById(dir);
      button.disabled = false;

      if (rooms[connection] && rooms[connection].key && !keys.includes(rooms[connection].key)){
        button.disabled = true;
      }

    }
  }
  if (roomData.key && !keys.includes(roomData.key)){
    keys.push(roomData.key);
    document.getElementById("message").textContent = "Hai trovato una chiave!";
    setTimeout(() => {document.getElementById("message").textContent = "";},3000);
  }

  if (roomData.puzzle) {
    puzzleActive = true;
    document.getElementById("puzzle").style.display = "block";
    document.getElementById("puzzle-text").textContent = `La stanza è ${roomData.puzzle}, che oggetto/risposta intendi usare?`;
    document.querySelectorAll(".buttons button").forEach(button => button.style.display = "none");

  }else {
      puzzleActive = false;
      document.getElementById("puzzle").style.display = "none";
      document.querySelectorAll(".buttons button").forEach(button => button.style.display = "block");
  }

  if (lives <= 0) {
      gameOver();
  }
  if (currentRoom === 17 && lives > 0){
    victory();
  }
}

function move(direction) {
  const roomData = rooms[currentRoom];
  const nextRoom = roomData.connections[direction];
  if (nextRoom) {
    currentRoom = nextRoom;
    updateUI();
  }
}

function submitAnswer() {
  const answer = document.getElementById("puzzle-answer").value;
  const roomData = rooms[currentRoom];
  if (answer.toLowerCase() === roomData.puzzle.toLowerCase()) {
    document.getElementById("message").textContent = "Risposta corretta!";
    setTimeout(() => {document.getElementById("message").textContent = "";},3000);

  } else {
    lives--;
    document.getElementById("message").textContent = "Risposta sbagliata! Hai perso una vita.";
    setTimeout(() => {document.getElementById("message").textContent = "";},3000);
  }
  updateUI();
}

function gameOver() {
  alert("Game Over!");
  disableAllInputs();
}

function victory() {
  alert("Hai vinto!");
  disableAllInputs();
}

function disableAllInputs() {
  document.querySelectorAll("button, input").forEach(el => el.disabled = true);
}

document.getElementById("north").addEventListener("click", () => move("n"));
document.getElementById("south").addEventListener("click", () => move("s"));
document.getElementById("east").addEventListener("click", () => move("e"));
document.getElementById("west").addEventListener("click", () => move("w"));
document.getElementById("submit").addEventListener("click", submitAnswer);

updateUI();
</script>
</body>
</html>
```